# 慧农循环管理平台

## 一、项目背景与核心目标

慧农循环管理平台是面向 **农业废弃物资源化利用** 的管理系统，聚焦 **桔梗类作物回收与再利用** 场景，通过数字化手段解决以下问题：
- **农业废弃物利用率低**：桔梗种植后的残余物（如根茎、叶片）未被有效回收。
- **循环经济链条断裂**：农户与回收企业间缺乏高效对接机制。
- **监管与追踪困难**：回收过程缺乏透明度，堆肥质量难以监控。

平台通过整合 **用户管理、回收登记、堆肥追踪、抽检管理** 等功能，构建从农户到企业的全链路闭环，促进农业循环经济可持续发展。

---

## 二、技术架构与核心组件

| **模块**         | **技术实现**                                                                 |
|------------------|------------------------------------------------------------------------------|
| 后端框架         | Spring Boot + MyBatis Plus（简化CRUD操作，支持分页和动态SQL）                 |
| 数据库           | MySQL（存储用户、回收记录、堆肥进度等结构化数据）                             |
| 缓存             | Redis（缓存用户会话、权限信息、热点数据，提升访问速度）                       |
| 消息队列         | RabbitMQ（异步处理通知、解耦业务模块）                                        |
| 短信服务         | 阿里云短信SDK（实现预约成功、进度更新等通知推送）                             |
| 权限控制         | Sa-Token（实现用户/管理员双角色认证与权限隔离）                           |

---

## 三、核心业务流程

### 1. 用户注册与登录
- 农户/管理员通过平台注册，登录后获得对应角色的token。
- Sa-Token实现权限分级，所有接口均需鉴权。

### 2. 农户发起回收申请
- 农户在系统中提交桔梗等废弃物的回收申请，填写作物类型、重量、地点、预约时间等信息。
- 系统自动记录申请时间、状态（待审核）。

### 3. 管理员审核回收申请
- 管理员登录后台，查看所有待审核的回收申请。
- 审核通过/拒绝，并可填写审核备注。
- 审核通过后，回收记录状态变更，农户可实时查看进度。

### 4. 堆肥批次管理与追踪
- 管理员可为通过审核的回收记录创建堆肥批次，自动生成批次号。
- 堆肥批次支持进度登记（温度、湿度、pH、备注等），每个批次可多次登记进度日志。
- 农户和管理员均可分页查看相关堆肥批次及其进度。

### 5. 进度日志与异常处理
- 管理员/农户可登记堆肥批次的进度日志，支持分页查询。
- 管理员可将批次标记为"完成"或"异常"，并填写原因。
- 批次完成/异常时，系统通过RabbitMQ推送通知，后续可扩展短信/站内信。

### 6. 抽检与监管（可扩展）
- 管理员可对堆肥批次发起抽检，登记抽检结果。
- 抽检异常批次可追溯到回收记录和农户，便于问题溯源和责任划分。

### 7. 数据统计与导出
- 管理员可导出回收记录、堆肥批次、进度日志等数据为Excel，便于线下存档和监管报表。
- 后续可扩展数据大屏、统计分析接口，支持回收量、异常率、农户参与度等多维度统计。

### 8. 消息通知与日志
- 关键节点（如审核通过、批次完成/异常）自动推送消息（RabbitMQ），后续可对接短信、站内信。
- 全局异常处理，所有操作、异常、关键业务流程均有日志记录，便于追溯和运维。

---

## 四、核心数据流转

1. **农户注册/登录 → 提交回收申请 → 等待审核**
2. **管理员审核 → 通过后创建堆肥批次 → 进度登记/追踪**
3. **堆肥批次完成/异常 → 自动通知 → 可发起抽检**
4. **所有数据支持分页查询、导出、权限细化**
5. **所有操作均有日志、异常处理，保证数据安全与可追溯**

---

## 五、权限与数据安全

- **农户**：仅能操作/查看自己的回收、堆肥、进度、抽检等数据
- **管理员**：可全局管理、审核、导出、抽检、统计
- **所有接口均有权限校验，防止越权访问**
- **逻辑删除机制，防止误删，数据可追溯**

---

## 六、可扩展方向

- **抽检管理、质检追溯、数据大屏、地图可视化、物联网设备接入**
- **多级角色、动态权限、第三方监管平台对接**
- **移动端/小程序适配、扫码登记、农户自助服务**

---

如需某一业务流程的详细时序图、接口文档、表结构设计或具体实现方案，请查阅源码或联系项目维护者。 